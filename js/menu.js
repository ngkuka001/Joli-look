window.matchMedia=window.matchMedia||(function(doc,undefined){"use strict";var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML="&shy;<style media=\""+q+"\"> #mq-test-1 { width: 42px; }</style>";docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q};};}(document));var is_mobile_width=function(){if(window.matchMedia("(max-width : 1024px)").matches){return true;}
return false;};$(function(){'use strict';var adapt_width=function(){if(!is_mobile_width()){$('.slideout').attr('style','');$('body').css('padding-top','');}else{$('.slideout').attr('style','top: '+$('.nav-header').outerHeight()+'px');$('body').css('padding-top',$('.header-holder').outerHeight()+'px');}
$('#catalog-nav').find('.selected').removeClass('selected').end().find('#catalog-menu').removeClass('show').addClass('hide');if(b_is_mobile!=is_mobile_width()){$('#catalog-nav a[data-gridtype]').eq(0).trigger('click');}};$.fn.openMenu=function(){var $current,$root,$parents,$menuheader,backurl;$current=$(this);$root=$current.parents('.menu-holder');$parents=$current.parents('.slideout');$menuheader=$root.find('.nav-header');$('.open').each(function(){if($(this).is($current)||$(this).is($root)||$(this).is($parents))return;$(this).removeClass('open');});$('#search .js-close').trigger('click');$('html').addClass('nooverflow');$root.addClass('open').find('.nav-header').addClass('open');$current.addClass('open').parents('.slideout').addClass('open');if(is_mobile_width()){if($parents.length){backurl='#'+$($parents[0]).attr('id');$menuheader.find('.back-icon').css('display','block').attr('href',backurl);}else{$menuheader.find('.back-icon').css('display','none').attr('href','#');};var pos_h=$menuheader.outerHeight();$current.css('top',pos_h);$menuheader.find('.menu-title').text($current.data('menutitle'));}};$(window).resize(function(){$(".showroom_page").fadeIn(100);$(".faceshape_page").fadeIn(100);$("#main-nav").removeClass("open");$("#slideout-header").removeClass("open");});$('header .back-icon').hide();$('.submenu').addClass('hide');$('#top-header-banner .close-banner').on('click',function(e){$("#top-header-banner").slideUp();$.get('/close-top-banner',function(data){if(data.success){}});});$('.js-slide').on('click',function(e){$($(this).attr('href')).openMenu();window.gtm_analytics.myBagQuickView();if($(this).attr('href')!='#subscribe')e.preventDefault();});$('.mobile-only.js-slide').on('click',function(e){if(window.innerWidth<720){$(".showroom_page").fadeOut(100);$(".faceshape_page").fadeOut(100);}
var $help=$("#help-li");var $locations=$("#locations-li");var $tryon=$("#tryon-li");var $collab=$("#collab-li");var $men=$("#men-li");var $women=$("#women-li");$help.parent().prepend($help);$locations.parent().prepend($locations);$tryon.parent().prepend($tryon);$collab.parent().prepend($collab);$men.parent().prepend($men);$women.parent().prepend($women);if($(this).hasClass('bag-icon')){$('.newsletter-mobile-only').css('display','none');$('.need-help-mobile').removeClass('hide');}});$('.js-submenu').on('click',function(e){var target,is_root,$current,$root,$parents,$menuheader,backurl;target=$(this).attr('href');$current=$(target);$parents=$current.parents('.submenu');if(!$parents.length){$parents=$current;$root=$current;is_root=true;}else{$root=$($parents[$parents.length-1]);is_root=false;}
$menuheader=$root.find('.submenu-header');$root.find('.hide').removeClass('hide').addClass('show');if(is_mobile_width()){$root.find('.submenu, li').removeClass('show').addClass('hide');$(target+', '+target+' li').removeClass('hide').addClass('show');$current.parents('.submenu, .submenu li').removeClass('hide').addClass('show');$root.find('ul a').removeClass('selected hide').addClass('show');if(!is_root){$current.closest('.submenu').prev('a').removeClass('show').addClass('hide');$current.parents('.submenu').prev('a').removeClass('show').addClass('hide');backurl='#'+$($parents[0]).attr('id');$menuheader.show().find('.menu-title').text($current.data('menutitle')).end().find('.back-icon').attr('href',backurl);}else{$('.submenu-header').hide();}}else{$root.find('.submenu').removeClass('show').addClass('hide');$current.removeClass('hide').addClass('show');$current.parents('.submenu').removeClass('hide').addClass('show').find('li, a').removeClass('hide').addClass('show');}
e.preventDefault();});$('#catalog-nav .nav-filters, #catalog-menu, .view-as').on('click','a',function(e){if($(this).data('gridtype')){$($(this).attr('href')).removeClass(function(index,css){return(css.match(/(^|\s)grid-\S+/g)||[]).join(' ');}).addClass($(this).data('gridtype'));$(this).siblings('.grayed-out').removeClass('selected').end().addClass('selected');window.products.initListingImgs();}else if($(this).is('.more-icon.selected')||!$(this).is('.js-submenu')){$('#catalog-menu, #catalog-menu-desktop').removeClass('show').addClass('hide');$('#catalog-nav .nav-filters, #catalog-menu').find('a:not(.grayed-out)').removeClass('selected');}else{$(this).parents('ul').find('a').removeClass('selected');$(this).addClass('selected');}
e.preventDefault();});$('body').on('click','.js-open',function(e){var $target=$($(this).attr('href'));$target.show();$target.on('click','.js-close',function(e){$target.hide();e.preventDefault();});e.preventDefault();});$('.menu-holder').on('click','.js-close',function(e){$('.open').removeClass('open');$('html').removeClass('nooverflow');if(window.innerWidth<720){$(".showroom_page").fadeIn(250);$(".faceshape_page").fadeIn(100);$(".faqs_page .questions-nav #faqs_sections").addClass('open');$(".careers_page .questions-nav #careers_sections").addClass('open');}
e.preventDefault();if($(this).parents('.cart').length>0){$('.need-help-mobile').addClass('hide');$('.need-help-intro').removeClass('hide');$('.need-help-info').addClass('hide');if($('.newsletter-mobile-only').attr('data-is-logged-in')!=1){$('.newsletter-mobile-only').css('display','block');}}});$('.dropdown').on('click','.select-icon',function(e){var shown=($(this).next('ul').css('display')=='block');$('.dropdown ul').hide();if(shown)$(this).next('ul').hide();else $(this).next('ul').show();e.preventDefault();});$('a[href=#help-form]').on('click',function(e){$($(this).attr('href')).addClass('open');e.preventDefault();});$('#search-kwd').on('focus',function(e){$(this).data('old',$(this).attr('placeholder')).attr('placeholder','');$('#search-suggest').css('display','block');e.preventDefault();});$('#search-kwd').on('blur',function(e){$('#search-suggest').css('display','none');$(this).val('').attr('placeholder',$(this).data('old'));e.preventDefault();});$('#search-kwd').keypress(function(){$('#search-suggest').css('display','none');});$("a[href='#search, #search-field']").on('click',function(){setTimeout(function(){$("#search-kwd").focus();},0);});$('.sc-link').click(function(){window.ODY.push(['openModal','Main']);});$('.cute-checkbox').on('click',function(e){var $el=$(this);var $input=$el.siblings('input[type="checkbox"]');$el.toggleClass('checked');($el.hasClass('checked'))?$input.attr('checked','checked'):$input.removeAttr('checked');e.preventDefault();});$('.selectbox select').customSelect();adapt_width();var b_is_mobile=is_mobile_width();$(window).on('resize',adapt_width);});